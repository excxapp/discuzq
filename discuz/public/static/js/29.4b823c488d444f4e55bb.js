(window.webpackJsonp=window.webpackJsonp||[]).push([[29,120],{"0WY/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("KKL4")),s=o(a("6NK7")),n=o(a("VVfg"));a("uXAG");function o(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{show:!1,payList:[{name:"钱包",icon:"icon-wallet"}],qrcodeShow:!1,walletBalance:"",errorInfo:"",value:"",userId:"",codeUrl:"",payLoading:!1,tcPlayerId:"tcPlayer"+Date.now(),player:null,videoFileid:"",videoAppid:"",viewportWidth:"",videoFileCover:"",loadCover:"",loadVideo:"",coverUrl:"",aaa:!0}},props:{themeCon:{type:Object},firstpostImageListProp:{type:Array},userDet:{type:Object}},mounted:function(){var t=this;setTimeout((function(){t.videoFileid=t.themeCon.threadVideo._data.file_id,t.videoAppid=t.videoAppid,t.$nextTick((function(){t.getVideoLang(t.videoFileid,t.videoAppid)}))}),2e3)},created:function(){var t=this;this.loadCover=!0,this.loadVideo=!1,this.viewportWidth=window.innerWidth;var e=navigator.userAgent;this.isAndroid=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,this.isiOS=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),this.isWeixin=s.default.isWeixin().isWeixin,this.isPhone=s.default.isWeixin().isPhone,this.userId=n.default.getLItem("tokenId"),this.videoAppid=n.default.getLItem("siteInfo")._data.qcloud.qcloud_app_id,this.loadUserInfo(),this.getForum(),this.userId&&this.getUsers(n.default.getLItem("tokenId")).then((function(e){t.getAuthority(e.readdata.groups[0]._data.id),t.walletBalance=e.readdata._data.walletBalance})),this.coverUrl=this.themeCon.threadVideo._data.cover_url},computed:{themeId:function(){return this.$route.params.themeId}},methods:{getVideoLang:function(t,e,a){var i=this;this.loadCover=!0,this.loadVideo=!1;var s={fileID:t,appID:e,width:this.viewportWidth-30,posterImage:!1};this.player=window.TCPlayer(this.tcPlayerId,s),this.player.ready((function(){i.loadCover=!1,i.loadVideo=!0}))},jumpPerDet:function(t){this.$router.push({path:"/home-page/"+t})},loadUserInfo:function(){var t=this;if(!this.userId)return!1;this.appFetch({url:"users",method:"get",splice:"/"+this.userId,data:{}}).then((function(e){t.walletBalance=e.readdata._data.walletBalance}))},getForum:function(){var t=this;this.appFetch({url:"forum",method:"get",data:{}}).then((function(e){if(e.errors)t.$toast.fail(e.errors[0].code);else{t.sitePrice=e.readdata._data.set_site.site_price;var a=e.readdata._data.set_site.site_expire;switch(a){case"":case"0":t.siteExpire="永久有效";break;default:t.siteExpire="有效期自加入起"+a+"天"}"1"===e.readdata._data.paycenter.wxpay_close&&t.payList.unshift({name:"微信支付",icon:"icon-wxpay"})}})).catch((function(t){}))},buyTheme:function(){this.show=!this.show},payImmediatelyClick:function(t){var e=this,a=this.appCommonH.isWeixin().isWeixin,i=this.appCommonH.isWeixin().isPhone;"微信支付"===t.name&&(this.show=!1,a?this.getOrderSn().then((function(){e.orderPay(12).then((function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e.onBridgeReady(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e.onBridgeReady(t)),document.attachEvent("onWeixinJSBridgeReady",e.onBridgeReady(t))):e.onBridgeReady(t)}))})):i?this.getOrderSn().then((function(){e.orderPay(11).then((function(t){e.wxPayHref=t.readdata._data.wechat_h5_link,window.location.href=e.wxPayHref;var a=setInterval((function(){e.payStatus&&e.payStatusNum>10&&clearInterval(a),e.getOrderStatus()}),3e3)}))})):this.getOrderSn().then((function(){e.orderPay(10).then((function(t){e.codeUrl=t.readdata._data.wechat_qrcode,e.qrcodeShow=!0;var a=setInterval((function(){e.payStatus&&e.payStatusNum>10&&clearInterval(a),e.getOrderStatus()}),3e3)}))})))},onInput:function(t){var e=this;this.value=this.value+t,6===this.value.length&&(this.errorInfo="",this.getOrderSn().then((function(){e.orderPay(20,e.value).then((function(t){var a=setInterval((function(){e.payStatus&&e.payStatusNum>10&&clearInterval(a),e.getOrderStatus()}),3e3)}))})))},onDelete:function(){this.value=this.value.slice(0,this.value.length-1)},onClose:function(){this.value="",this.errorInfo="",this.payLoading=!1},onBridgeReady:function(t){var e=this,a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.attributes.wechat_js.appId,timeStamp:t.data.attributes.wechat_js.timeStamp,nonceStr:t.data.attributes.wechat_js.nonceStr,package:t.data.attributes.wechat_js.package,signType:"MD5",paySign:t.data.attributes.wechat_js.paySign},(function(t){("get_brand_wcpay_request:cancel"==t.err_msg||"get_brand_wcpay_request:fail"==t.err_msg)&&(a.payLoading=!1,resolve)}));var i=setInterval((function(){"1"==e.payStatus||e.payStatusNum>10?clearInterval(i):e.getOrderStatus()}),3e3)},getOrderSn:function(){var t=this;return this.appFetch({url:"orderList",method:"post",data:{type:3,thread_id:this.themeId}}).then((function(e){e.errors?t.$toast.fail(e.errors[0].code):t.orderSn=e.readdata._data.order_sn})).catch((function(t){}))},orderPay:function(t,e){var a=this;return this.appFetch({url:"orderPay",method:"post",splice:"/"+this.orderSn,data:{payment_type:t,pay_password:e}}).then((function(t){if(!t.errors)return a.payLoading=!0,t;a.value="",t.errors[0].detail?a.$toast.fail(t.errors[0].code+"\n"+t.errors[0].detail[0]):a.$toast.fail(t.errors[0].code)})).catch((function(t){}))},getUsersInfo:function(){},getOrderStatus:function(){var t=this;return this.appFetch({url:"order",method:"get",splice:"/"+this.orderSn,data:{}}).then((function(e){if(e.errors){if(!e.errors[0].detail)throw t.$toast.fail(e.errors[0].code),new Error(e.error);t.$toast.fail(e.errors[0].code+"\n"+e.errors[0].detail[0])}else t.payStatus=e.readdata._data.status,t.payStatusNum++,("1"==t.payStatus||t.payStatusNum>10)&&("1"==t.payStatus&&(location.reload(),t.sendMsgToParent(),t.payLoading=!1),t.rewardShow=!1,t.qrcodeShow=!1,t.payStatusNum=11)}))},sendMsgToParent:function(){this.$emit("listenToChildEvent",!0)},getUsers:function(t){var e=this;return this.appFetch({url:"users",method:"get",splice:"/"+t,headers:{Authorization:"Bearer "+n.default.getLItem("Authorization")},data:{include:["groups"]}}).then((function(t){if(!t.errors)return t;e.$toast.fail(t.errors[0].code)})).catch((function(t){}))},getAuthority:function(t){var e=this;return this.appFetch({url:"authority",method:"get",splice:"/"+t,data:{include:["permission"]}}).then((function(t){if(!t.errors)return t;e.$toast.fail(t.errors[0].code)})).catch((function(t){}))},imageSwiper:function(t,e,a){(0,i.default)({images:this.firstpostImageListProp,startPosition:t,showIndex:!0,showIndicators:!0,loop:!0})}},beforeRouteLeave:function(t,e,a){a()}}},"19Nx":function(t,e,a){"use strict";a.r(e);var i=a("oFkl"),s=a("mfst");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);var o=a("KHd+"),r=Object(o.a)(s.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"5Yth":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{model:{value:t.themeCon,callback:function(e){t.themeCon=e},expression:"themeCon"}},[a("div",{staticClass:"postTop"},[a("div",{staticClass:"postPer"},[t.themeCon.user&&t.themeCon.user._data.avatarUrl?a("img",{staticClass:"postHead",attrs:{src:t.themeCon.user._data.avatarUrl,alt:""},on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}}):a("img",{staticClass:"postHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}}),t._v(" "),a("div",{staticClass:"perDet"},[t.themeCon.user?a("div",{staticClass:"perName",on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}},[t._v(t._s(t.themeCon.user._data.username))]):a("div",{staticClass:"perName"},[t._v("该用户已被删除")]),t._v(" "),a("div",{staticClass:"postTime"},[t._v(t._s(t.$moment(t.themeCon._data.createdAt).format("YYYY-MM-DD HH:mm")))])])]),t._v(" "),a("div",{staticClass:"postOpera"},[t.themeCon._data.isSticky?a("span",{staticClass:"icon iconfont icon-top"}):t._e()])]),t._v(" "),a("div",{staticClass:"videoContentText",domProps:{innerHTML:t._s(t.themeCon.firstPost._data.contentHtml)}}),t._v(" "),t.themeCon._data.price>0&&!t.themeCon._data.paid?a("div",{staticClass:"videoBox"},[""==t.themeCon.threadVideo._data.file_id||null==t.themeCon.threadVideo._data.file_id?a("img",{staticClass:"videoCover",attrs:{src:t.themeCon.threadVideo._data.cover_url,alt:""}}):t._e()]):a("div",{staticClass:"videoBox"},[0==t.themeCon.threadVideo._data.status?a("img",{staticClass:"transcodingCover",attrs:{src:t.appConfig.staticBaseUrl+"/images/transcoding.png",alt:""}}):t._e(),t._v(" "),""!=t.themeCon.threadVideo._data.file_id&&null!=t.themeCon.threadVideo._data.file_id&&1==t.themeCon.threadVideo._data.status?a("div",{staticClass:"videoContent"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.loadCover,expression:"loadCover"}],ref:"coverShow",attrs:{src:t.coverUrl,alt:""}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadVideo,expression:"loadVideo"}]},[a("video",{attrs:{id:t.tcPlayerId,preload:"auto",width:"100%",playsinline:"","webkit-playsinline":"","x5-playsinline":""}})])]):t._e()]),t._v(" "),t.themeCon._data.price>0&&!t.themeCon._data.paid?a("div",{staticClass:"payTipBox"},[a("p",{staticClass:"tipPrice"},[t._v("\n      本内容需向作者支付 \n      "),a("span",[t._v(t._s(t.themeCon._data.price))]),t._v(" 元 才能浏览\n    ")]),t._v(" "),a("a",{staticClass:"buyBtn",attrs:{href:"javascript:;"},on:{click:t.buyTheme}},[t._v("购买内容")])]):t._e(),t._v(" "),a("van-popup",{staticClass:"qrCodeBox",attrs:{round:"","close-icon-position":"top-right",closeable:"","get-container":"body"},model:{value:t.qrcodeShow,callback:function(e){t.qrcodeShow=e},expression:"qrcodeShow"}},[a("span",{staticClass:"popupTit"},[t._v("立即支付")]),t._v(" "),a("div",{staticClass:"payNum"},[t._v("\n      ￥\n      "),a("span",[t._v(t._s(t.themeCon._data.price))])]),t._v(" "),a("div",{staticClass:"payType"},[a("span",{staticClass:"typeLeft"},[t._v("支付方式")]),t._v(" "),a("span",{staticClass:"typeRight"},[a("i",{staticClass:"icon iconfont icon-wepay"}),t._v("微信支付\n      ")])]),t._v(" "),a("img",{staticClass:"qrCode",attrs:{src:t.codeUrl,alt:"微信支付二维码"}}),t._v(" "),a("p",{staticClass:"payTip"},[t._v("微信识别二维码支付")])]),t._v(" "),t.payLoading?a("div",{staticClass:"loadFix"},[a("div",{staticClass:"loadMask"}),t._v(" "),a("van-loading",{staticClass:"loadIcon",attrs:{color:"#f7f7f7",type:"spinner"}})],1):t._e(),t._v(" "),t.userDet?a("PayMethod",{attrs:{data:t.payList,"pwd-value":t.value,money:t.themeCon._data.price,balance:t.walletBalance,walletStatus:t.userDet._data.canWalletPay,payUrl:"setup-pay-pwd",error:t.errorInfo},on:{oninput:t.onInput,delete:t.onDelete,close:t.onClose,payImmediatelyClick:t.payImmediatelyClick},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}):t._e()],1)},s=[]},"8mho":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("KKL4")),s=o(a("6NK7")),n=o(a("VVfg"));a("uXAG");function o(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{firstpostImageList:[],userId:""}},props:{themeCon:{type:Object},firstpostImageListProp:{type:Array}},created:function(){var t=navigator.userAgent;this.isAndroid=t.indexOf("Android")>-1||t.indexOf("Adr")>-1,this.isiOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),this.isWeixin=s.default.isWeixin().isWeixin,this.isPhone=s.default.isWeixin().isPhone,this.userId=n.default.getLItem("tokenId")},computed:{},methods:{downAttachment:function(t){this.isiOS&&this.$message("因iphone系统限制，您的手机无法下载文件。请使用安卓手机或电脑访问下载")},jumpPerDet:function(t){this.$router.push({path:"/home-page/"+t})},imageSwiper:function(t,e,a){(0,i.default)({images:this.firstpostImageListProp,startPosition:t,showIndex:!0,showIndicators:!0,loop:!0,closeOnPopstate:!0})}},mounted:function(){},beforeRouteLeave:function(t,e,a){a()}}},DmCy:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{model:{value:t.themeCon,callback:function(e){t.themeCon=e},expression:"themeCon"}},[a("div",{staticClass:"postTop"},[a("div",{staticClass:"postPer"},[t.themeCon.user&&t.themeCon.user._data.avatarUrl?a("img",{staticClass:"postHead",attrs:{src:t.themeCon.user._data.avatarUrl,alt:""},on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}}):a("img",{staticClass:"postHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}}),t._v(" "),a("div",{staticClass:"perDet"},[t.themeCon.user?a("div",{staticClass:"perName",on:{click:function(e){return t.jumpPerDet(t.themeCon.user._data.id)}}},[t._v(t._s(t.themeCon.user._data.username))]):a("div",{staticClass:"perName"},[t._v("该用户已被删除")]),t._v(" "),a("div",{staticClass:"postTime"},[t._v(t._s(t.$moment(t.themeCon._data.createdAt).format("YYYY-MM-DD HH:mm")))])])]),t._v(" "),a("div",{staticClass:"postOpera"},[t.themeCon._data.isSticky?a("span",{staticClass:"icon iconfont icon-top"}):t._e()])]),t._v(" "),a("div",{staticClass:"postContent",domProps:{innerHTML:t._s(t.themeCon.firstPost._data.contentHtml)}}),t._v(" "),t.firstpostImageListProp.length>0?a("div",{staticClass:"postImgBox"},[a("div",{staticClass:"postImgList"},[t.isWeixin||t.isPhone?a("div",t._l(t.firstpostImageListProp,(function(e,i){return a("van-image",{key:i,attrs:{"lazy-load":"",key:"index",src:e},on:{click:function(e){return t.imageSwiper(i,"detailImg")}}})})),1):a("div",t._l(t.firstpostImageListProp,(function(t,e){return a("van-image",{key:e,attrs:{"lazy-load":"",key:"index",src:t}})})),1)])]):t._e(),t._v(" "),t.isiOS&&t.themeCon.firstPost.attachments.length>0?a("div",{staticClass:"uploadFileList"},t._l(t.themeCon.firstPost.attachments,(function(e,i){return a("a",{key:i,staticClass:"fileChi",on:{click:function(a){return t.downAttachment(e._data.url)}}},["rar"===e._data.extension?a("span",{staticClass:"icon iconfont icon-rar"}):t._e(),t._v(" "),"zip"===e._data.extension?a("span",{staticClass:"icon iconfont icon-rar"}):"doc"===e._data.extension||"docx"===e._data.extension?a("span",{staticClass:"icon iconfont icon-word"}):"pdf"===e._data.extension?a("span",{staticClass:"icon iconfont icon-pdf"}):"jpg"===e._data.extension?a("span",{staticClass:"icon iconfont icon-jpg"}):"mp"===e._data.extension?a("span",{staticClass:"icon iconfont icon-mp3"}):"mp1"===e._data.extension?a("span",{staticClass:"icon iconfont icon-mp4"}):"png"===e._data.extension?a("span",{staticClass:"icon iconfont icon-PNG"}):"ppt"===e._data.extension?a("span",{staticClass:"icon iconfont icon-ppt"}):"swf"===e._data.extension?a("span",{staticClass:"icon iconfont icon-swf"}):"TIFF"===e._data.extension?a("span",{staticClass:"icon iconfont icon-TIFF"}):"txt"===e._data.extension?a("span",{staticClass:"icon iconfont icon-txt"}):"xls"===e._data.extension?a("span",{staticClass:"icon iconfont icon-xls"}):a("span",{staticClass:"icon iconfont icon-doubt"}),t._v(" "),a("span",{staticClass:"fileName"},[t._v(t._s(e._data.fileName))])])})),0):t._e(),t._v(" "),!t.isiOS&&t.themeCon.firstPost.attachments.length>0?a("div",{staticClass:"uploadFileList"},t._l(t.themeCon.firstPost.attachments,(function(e,i){return a("a",{key:i,staticClass:"fileChi",attrs:{href:e._data.url,download:""}},["rar"===e._data.extension?a("span",{staticClass:"icon iconfont icon-rar"}):t._e(),t._v(" "),"zip"===e._data.extension?a("span",{staticClass:"icon iconfont icon-rar"}):"doc"===e._data.extension||"docx"===e._data.extension?a("span",{staticClass:"icon iconfont icon-word"}):"pdf"===e._data.extension?a("span",{staticClass:"icon iconfont icon-pdf"}):"jpg"===e._data.extension?a("span",{staticClass:"icon iconfont icon-jpg"}):"mp"===e._data.extension?a("span",{staticClass:"icon iconfont icon-mp3"}):"mp1"===e._data.extension?a("span",{staticClass:"icon iconfont icon-mp4"}):"png"===e._data.extension?a("span",{staticClass:"icon iconfont icon-PNG"}):"ppt"===e._data.extension?a("span",{staticClass:"icon iconfont icon-ppt"}):"swf"===e._data.extension?a("span",{staticClass:"icon iconfont icon-swf"}):"TIFF"===e._data.extension?a("span",{staticClass:"icon iconfont icon-TIFF"}):"txt"===e._data.extension?a("span",{staticClass:"icon iconfont icon-txt"}):"xls"===e._data.extension?a("span",{staticClass:"icon iconfont icon-xls"}):a("span",{staticClass:"icon iconfont icon-doubt"}),t._v(" "),a("span",{staticClass:"fileName"},[t._v(t._s(e._data.fileName))])])})),0):t._e()])},s=[]},Fhj6:function(t,e,a){"use strict";a.r(e);var i=a("5Yth"),s=a("XsHP");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);var o=a("KHd+"),r=Object(o.a)(s.default,i.a,i.b,!1,null,null,null);e.default=r.exports},"Qo/1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(a("QbLZ")),s=l(a("JZuw")),n=l(a("3XTc")),o=l(a("2qD6")),r=l(a("el7v")),c=l(a("Fhj6")),d=l(a("dWbn"));function l(t){return t&&t.__esModule?t:{default:t}}a("iUmJ"),a("N960"),e.default=(0,i.default)({name:"detailsView",components:{comHeader:s.default,normalDetail:r.default,longTextDetail:o.default,videoDetail:c.default,PayMethod:n.default}},d.default)},XsHP:function(t,e,a){"use strict";a.r(e);var i=a("q7E9"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e.default=s.a},el7v:function(t,e,a){"use strict";a.r(e);var i=a("DmCy"),s=a("hWSE");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);var o=a("KHd+"),r=Object(o.a)(s.default,i.a,i.b,!1,null,null,null);e.default=r.exports},hWSE:function(t,e,a){"use strict";a.r(e);var i=a("lQhp"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e.default=s.a},lQhp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a("QbLZ")),s=n(a("8mho"));function n(t){return t&&t.__esModule?t:{default:t}}a("iUmJ"),a("N960"),e.default=(0,i.default)({name:"normalDetailsView",components:{}},s.default)},mfst:function(t,e,a){"use strict";a.r(e);var i=a("Qo/1"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e.default=s.a},oFkl:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circleCon"},[a("comHeader",{attrs:{title:"详情",menuIconShow:t.menuStatus}}),t._v(" "),a("van-pull-refresh",{attrs:{"head-height":0},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t.themeShow?a("div",{staticClass:"content marBfixed"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.contentExamine,expression:"contentExamine"}],staticClass:"contentExamine"},[t._v(t._s(t.examineWord))]),t._v(" "),a("div",{staticClass:"cirPostCon"},[0==t.themeCon._data.type?a("normalDetail",{attrs:{themeCon:t.themeCon,firstpostImageListProp:t.firstpostImageList}}):t._e(),t._v(" "),1==t.themeCon._data.type?a("longTextDetail",{attrs:{themeCon:t.themeCon,userDet:t.userDet,firstpostImageListProp:t.firstpostImageList},on:{listenToChildEvent:t.detailsLoad}}):t._e(),t._v(" "),2==t.themeCon._data.type?a("videoDetail",{attrs:{themeCon:t.themeCon,userDet:t.userDet,firstpostImageListProp:t.firstpostImageList},on:{listenToChildEvent:t.detailsLoad}}):t._e(),t._v(" "),a("div",{staticClass:"postDetBot"},[a("span",{staticClass:"readNum"},[t._v(t._s(t.themeCon._data.postCount-1)+" 回复")]),t._v(" "),t.themeCon._data.canEssence||t.themeCon._data.canSticky||t.themeCon._data.canHide||t.themeCon._data.canEdit?a("div",{ref:"screenBox",staticClass:"screen",on:{click:t.bindScreen}},[a("span",[t._v("管理")]),t._v(" "),a("span",{staticClass:"icon iconfont icon-down-menu jtGrayB"}),t._v(" "),t.showScreen?a("div",{staticClass:"themeList"},[t.themeCon._data.canEssence?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.themeOpera(t.themeCon.firstPost._data.id,2,t.themeCon.category._data.id,t.themeCon.firstPost._data.content)}}},[t._v(t._s(t.essenceFlag))]):t._e(),t._v(" "),t.themeCon._data.canSticky?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.themeOpera(t.themeCon.firstPost._data.id,3,t.themeCon.category._data.id,t.themeCon.firstPost._data.content)}}},[t._v(t._s(t.stickyFlag))]):t._e(),t._v(" "),t.themeCon._data.canHide?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.themeOpera(t.themeCon.firstPost._data.id,4,t.themeCon.category._data.id,t.themeCon.firstPost._data.content)}}},[t._v("删除")]):t._e(),t._v(" "),t.themeCon.firstPost._data.canEdit?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.themeOpera(t.themeCon.firstPost._data.id,5,t.themeCon.category._data.id,t.themeCon.firstPost._data.content)}}},[t._v("编辑")]):t._e()]):t._e()]):t._e(),t._v(" "),a("a",{staticClass:"postDetR",attrs:{href:"javascript:;"},on:{click:function(e){return t.themeOpera(t.themeCon.firstPost._data.id,1,t.themeCon.category._data.id,t.themeCon.firstPost._data.content)}}},[t._v(t._s(t.collectFlag))]),t._v(" "),a("a",{staticClass:"postDetR",attrs:{href:"javascript:;"},on:{click:t.shareTheme}},[t._v("分享")]),t._v(" "),a("input",{attrs:{type:"button",hidden:"",value:"点击复制代码"}})])],1),t._v(" "),a("div",{staticClass:"gap"}),t._v(" "),a("div",{staticClass:"commentBox"},[t.themeCon.firstPost.likedUsers.length>0&&t.likeLen?a("div",{staticClass:"likeBox",model:{value:t.userArrStatus,callback:function(e){t.userArrStatus=e},expression:"userArrStatus"}},[a("span",{staticClass:"icon iconfont icon-praise-after"}),t._v(" "),a("span",{staticClass:"likedUserList",attrs:{id:"likedUserList"},domProps:{innerHTML:t._s(t.userArr(t.themeCon.firstPost.likedUsers,!1))}})]):t._e(),t._v(" "),t.themeCon.rewardedUsers.length>0&&t.themeCon.rewardedUsers.length<=11?a("div",{staticClass:"payPer"},[a("span",{staticClass:"icon iconfont icon-money"}),t._v(" "),t._l(t.themeCon.rewardedUsers,(function(e,i){return a("div",{key:i,staticClass:"payPerHeaChi"},[e._data.avatarUrl?a("img",{staticClass:"payPerHead",attrs:{src:e._data.avatarUrl},on:{click:function(a){return t.jumpPerDet(e._data.id)}}}):a("img",{staticClass:"payPerHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(a){return t.jumpPerDet(e._data.id)}}})])}))],2):t._e(),t._v(" "),t.themeCon.rewardedUsers.length>11?a("div",{staticClass:"payPer"},[a("span",{staticClass:"icon iconfont icon-money"}),t._v(" "),t._l(t.themeCon.rewardedUsers,(function(e,i){return i<t.limitLen?a("div",{key:i,staticClass:"payPerHeaChi"},[e._data.avatarUrl?a("img",{staticClass:"payPerHead",attrs:{src:e._data.avatarUrl},on:{click:function(a){return t.jumpPerDet(e._data.id)}}}):a("img",{staticClass:"payPerHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(a){return t.jumpPerDet(e._data.id)}}})]):t._e()})),t._v(" "),t.themeCon.rewardedUsers.length>5&&t.rewardTipShow?a("span",{staticClass:"foldTip"},[t._v("等"+t._s(t.themeCon.rewardedUsers.length)+"人进行了打赏")]):t._e()],2):t._e(),t._v(" "),a("van-list",{attrs:{finished:t.finished,offset:t.offset,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.themeCon.posts,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"commentPostDet"},[a("div",{staticClass:"postTop"},[a("div",{staticClass:"postPer"},[e.user&&e.user._data.avatarUrl?a("img",{staticClass:"postHead",attrs:{src:e.user._data.avatarUrl},on:{click:function(a){return t.jumpPerDet(e.user._data.id)}}}):a("img",{staticClass:"postHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(a){return t.jumpPerDet(e.user._data.id)}}}),t._v(" "),a("div",{staticClass:"perDet"},[e.user&&e.user._data.username?a("div",{staticClass:"perName",on:{click:function(a){return t.jumpPerDet(e.user._data.id)}}},[e.user?a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.jumpPerDet(e.user._data.id)}}},[t._v(t._s(e.user._data.username))]):a("a",{attrs:{href:"javascript:;"}},[t._v("该用户已被删除")]),t._v(" "),e._data.replyUserId?a("span",{staticClass:"font9"},[t._v("回复")]):t._e(),t._v(" "),e._data.replyUserId&&e.replyUser?a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.jumpPerDet(e.user._data.id)}}},[t._v(t._s(e.replyUser._data.username))]):e._data.replyUserId&&!e.replyUser?a("a",{attrs:{href:"javascript:;"}},[t._v("该用户已被删除")]):t._e()]):a("div",{staticClass:"perName"},[t._v("该用户已被删除")]),t._v(" "),a("div",{staticClass:"postTime"},[t._v(t._s(t.$moment(e._data.createdAt).format("YYYY-MM-DD HH:mm")))])])])]),t._v(" "),a("div",{staticClass:"postContent",domProps:{innerHTML:t._s(e._data.contentHtml)}}),t._v(" "),e.images.length>0?a("div",{staticClass:"postImgBox"},[a("div",{staticClass:"themeImgList moreImg"},[t.isWeixin||t.isPhone?a("div",t._l(e.images,(function(e,s){return a("van-image",{key:s,attrs:{"lazy-load":"",src:e._data.thumbUrl},on:{click:function(e){return t.imageSwiper(s,"replyImg",i)}}})})),1):a("div",t._l(e.images,(function(t,e){return a("van-image",{key:e,attrs:{"lazy-load":"",src:t._data.thumbUrl}})})),1)])]):t._e()]),t._v(" "),a("div",{staticClass:"commentOpera padT22"},[e._data.canHide?a("a",{on:{click:function(a){return t.deleteOpear(e._data.id,i)}}},[t._v("删除")]):t._e(),t._v(" "),e._data.isLiked?a("a",{on:{click:function(a){return t.replyOpera(e._data.id,"2",e._data.isLiked,e._data.canLike,i)}}},[a("span",{staticClass:"icon iconfont icon-praise-after",class:{"icon-like":t.likedClass}}),t._v("\n                "+t._s(e._data.likeCount)+"\n              ")]):a("a",{on:{click:function(a){return t.replyOpera(e._data.id,"2",e._data.isLiked,e._data.canLike,i)}}},[a("span",{staticClass:"icon iconfont icon-like",class:{"icon-praise-after":t.likedClass}}),t._v("\n                "+t._s(e._data.likeCount)+"\n              ")]),t._v(" "),a("a",{staticClass:"icon iconfont icon-review",on:{click:function(a){return t.replyToJump(t.themeCon._data.id,e._data.id,e._data.content)}}})])])})),0)],1)]):t._e()]),t._v(" "),t.themeCon?a("div",{staticClass:"detailsFooter",class:{twoChi:t.twoChi},attrs:{id:"detailsFooter"}},[a("div",{staticClass:"footChi",on:{click:function(e){return t.replyToJump(t.themeCon._data.id,0,!1)}}},[a("span",{staticClass:"icon iconfont icon-review"}),t._v("\n      回复\n    ")]),t._v(" "),a("div",{staticClass:"footChi",on:{click:function(e){return t.footReplyOpera(t.themeCon.firstPost._data.id,"3",t.themeIsLiked)}}},[t.themeIsLiked?a("span",{staticClass:"icon iconfont icon-praise-after"}):a("span",{staticClass:"icon iconfont icon-like"}),t._v("\n      赞\n    ")]),t._v(" "),"1"==t.wxpay||1==t.wxpay?a("div",{staticClass:"footChi",on:{click:t.showRewardPopup}},[a("span",{staticClass:"icon iconfont icon-reward"}),t._v("\n      打赏\n    ")]):t._e()]):t._e(),t._v(" "),a("van-popup",{staticClass:"rewardPopup",style:{overflow:"hidden",left:t.isPhone||t.isWeixin?"0":(t.viewportWidth-640)/2+"px",width:t.isPhone||t.isWeixin?"100%":"640px"},attrs:{id:"rewardPopup",closeable:"","close-icon-position":"top-right",position:"bottom"},model:{value:t.rewardShow,callback:function(e){t.rewardShow=e},expression:"rewardShow"}},[a("span",{staticClass:"support"},[t._v("支持作者继续创作")]),t._v(" "),a("div",{staticClass:"rewardMonBox"},t._l(t.rewardNumList,(function(e,i){return a("a",{key:i,staticClass:"moneyChi",on:{click:function(a){return t.payClick(e.rewardNum)}}},[a("span",[t._v(t._s(e.rewardNum))]),t._v("元\n      ")])})),0)]),t._v(" "),a("van-popup",{staticClass:"qrCodeBox",attrs:{round:"","close-icon-position":"top-right",closeable:"","get-container":"body"},model:{value:t.qrcodeShow,callback:function(e){t.qrcodeShow=e},expression:"qrcodeShow"}},[a("span",{staticClass:"popupTit"},[t._v("立即支付")]),t._v(" "),a("div",{staticClass:"payNum"},[t._v("\n      ￥\n      "),a("span",[t._v(t._s(t.amountNum))])]),t._v(" "),a("div",{staticClass:"payType"},[a("span",{staticClass:"typeLeft"},[t._v("支付方式")]),t._v(" "),a("span",{staticClass:"typeRight"},[a("i",{staticClass:"icon iconfont icon-wepay"}),t._v("微信支付\n      ")])]),t._v(" "),a("img",{staticClass:"qrCode",attrs:{src:t.codeUrl,alt:""}}),t._v(" "),a("p",{staticClass:"payTip"},[t._v("微信识别二维码支付")])]),t._v(" "),t.userDet?a("PayMethod",{attrs:{data:t.payList,money:t.amountNum,balance:t.walletBalance,walletStatus:t.userDet._data.canWalletPay,"pwd-value":t.value,payUrl:"setup-pay-pwd",error:t.errorInfo},on:{oninput:t.onInput,delete:t.onDelete,close:t.onClose,payImmediatelyClick:t.payImmediatelyClick},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}):t._e(),t._v(" "),t.payLoading?a("div",{staticClass:"loadFix"},[a("div",{staticClass:"loadMask"}),t._v(" "),a("van-loading",{staticClass:"loadIcon",attrs:{color:"#333333",type:"spinner"}})],1):t._e(),t._v(" "),t.loginBtnFix?a("van-button",{staticClass:"loginBtnFix",class:{hide:t.loginHide},style:{overflow:"hidden",left:t.isPhone||t.isWeixin?"30%":(t.viewportWidth-640)/2+192+"px",width:t.isPhone||t.isWeixin?"40%":"256px"},attrs:{type:"primary"},on:{click:function(e){return t.loginJump(1)}}},[t._v(t._s(t.loginWord))]):t._e()],1)},s=[]},q7E9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("QbLZ")),s=o(a("0WY/")),n=o(a("3XTc"));function o(t){return t&&t.__esModule?t:{default:t}}a("iUmJ"),a("N960"),e.default=(0,i.default)({name:"videoDetailsView",components:{PayMethod:n.default}},s.default)}}]);